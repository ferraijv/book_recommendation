<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M07VZC8BC6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-M07VZC8BC6');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}SmartBookFinder{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}Discover curated book recommendations tailored to your taste.{% endblock %}">
    <meta property="og:title" content="{% block og_title %}SmartBookFinder{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Personalized book recommendations for every reader.{% endblock %}">
    <meta property="og:image" content="{% block og_image %}/static/images/default-image.png{% endblock %}">
    <meta property="og:url" content="{% block og_url %}https://smartbookfinder.com{% endblock %}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/styles.css">
    <link rel="canonical" href="https://smartbookfinder.com{{ request.path }}" />
    <link rel="icon" type="image/webp" href="{{ url_for('static', filename='images/flavicon.webp') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
<div class="site-shell">
    <header>
        <div class="container navbar">
            <a href="/" class="brand" aria-label="SmartBookFinder home">
                <img src="/static/images/book_logo.webp" alt="SmartBookFinder logo">
                <span>SmartBookFinder</span>
            </a>

            <nav class="nav-links" id="nav-links">
                <a href="/">Home</a>
                <a href="/reader-profile">Reader Profile</a>
                <a href="/about">About</a>
                <a href="/blog">Blog</a>
            </nav>

            <div class="nav-actions">
                <a class="nav-cta" href="/reader-profile">Start a profile</a>
            </div>

            <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <main class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}" role="alert">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="container footer-grid">
            <p>SmartBookFinder surfaces thoughtful recommendations powered by your preferences.</p>
            <p style="font-size: 0.9em;">Disclaimer: As an Amazon Associate, I earn from qualifying purchases. Recommendations are generated dynamically and are not influenced by affiliate income.</p>
        </div>
    </footer>
</div>

<script>
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('nav-links');

    if (hamburger) {
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('open');
        });
    }

    function toggleDescription(button) {
        const descriptionContainer = button.parentElement;
        const moreText = descriptionContainer.querySelector('.more-text');
        const ellipsis = descriptionContainer.querySelector('.ellipsis');

        if (moreText && ellipsis) {
            const isHidden = moreText.style.display === 'none' || moreText.style.display === '';
            moreText.style.display = isHidden ? 'inline' : 'none';
            ellipsis.style.display = isHidden ? 'none' : 'inline';
            button.textContent = isHidden ? 'See Less' : 'See More';
        }
    }
</script>
</body>
</html>
